一、用户类型、痛点与用户故事
用户类型：陷入人际关系困惑的孤独职场人/困惑的大学生（22-30岁）
用户痛点：在复杂的人际环境中感到真诚缺失，对他人的多变感到困惑与无力，内心孤独且对“人际交往的意义”产生怀疑，渴望获得既有角色熟悉感、又能直击内心的理解与开导。
用户故事：
小宇是一名刚入职半年的职场新人，原本期待的“真诚共事”，却在同事的客套推诿、前辈的忽冷忽热中逐渐落空。他常常对着手机里大学室友的合照发呆，不明白为什么进入社会后，人和人的关系变得这么“快”又这么“假”。
 
这天晚上，他打开应用，给大大怪将军写了那封心里话：“亲爱的大大怪将军：见字如面。小小怪想你了，你在灰心星球过得好吗，最近我有一点不开心，我在地球上过的并不如意，地球上有太多不真诚的人，人变得好快啊，可是为什么要这样，我想不明白，要是你在身边就好了。” 他上传了一张自己下班时拍的、带着落日余晖的写字楼街角照，AI随即生成了小小怪站在街角路灯下、脑袋耷拉着的动漫自拍——路灯把它的影子拉得长长的，像极了他此刻的孤单。
 
发送完信的十分钟后，应用弹出了“大大怪将军的回信”提醒。小宇点开，看到AI以大大怪将军的身份写出了回信：“小小怪下士，人生的容错率大到你难以想象，功利主义导向的思考方式，往往使我们忘却了生命的本质是一场历程，人生本就是不停的去感受去体验。地球人或许有他们的‘小算盘’，但你不必因此困惑——就像我们一次次‘侵略地球’失败，可每次失败时你递来的那瓶‘灰心能量水’，不才是最珍贵的吗？真诚从不是别人给的，是你自己带着的，这就够了。” 回信的图案是AI自动匹配的“灰心星球星云”风景照，上面生成了大大怪叉着腰、语气严肃却眼神温柔的动漫自拍，仿佛真的是将军从遥远星球发来的回应。
 
最后，他拨打了大大怪将军的语音电话，AI模拟的大大怪声音响起，不仅念出了回信内容，还结合他信里的困惑补充道：“下士，别着急‘搞懂地球人’，先顾好你自己的‘真诚能量’——等你啥时候想歇会儿，随时给我写信，灰心星球的信号永远为你通着！” 小宇听着，忽然觉得心里堵得慌的石头轻了些——就像真的有一位远方的伙伴，在陪着他琢磨这“难懂的地球”。
二 功能规划、优先级与开发计划
1. 功能规划、优先级与开发计划

核心功能列表：

角色发现与搜索：提供角色库，用户可浏览或搜索角色（如小小怪将军、哈利·波特、苏格拉底等）。

多模态交互（核心）：

文字聊天：与AI角色进行实时文字对话。

语音聊天（TTS & ASR）：与AI角色进行实时语音对话（如第一张图描述的语音电话）。

情感化内容生成：

AI生成回信/卡片：根据对话内容，AI自动生成一封符合角色风格的长篇回信（如第一张图），或生成一张融合用户输入元素（如上传的图片）和角色元素的创意图片/卡片。

记忆与上下文：AI能记住近期对话内容，实现连续、有深度的交流。

用户创作与分享：用户可以将精彩的对话、回信或生成的图片分享到社区（如第二张图所示的界面），与其他用户互动。
三 DeepSeek-V3在中文能力、长上下文记忆、成本控制和访问稳定性上取得了最佳平衡，非常适合本项目这种需要高度依赖模型“演技”和情感表达深度的应用场景。

功能优先级：

P0（必须拥有）：文字聊天、语音聊天（TTS&ASR）、基础角色库。这是实现核心价值的最小功能集。

P1（应该拥有）：情感化内容生成（回信/卡片）、简单的对话记忆。极大提升用户体验和情感共鸣。

P2（将来拥有）：社区分享系统、更复杂的长期记忆、更多角色技能。

##
 技术架构

### 前端
- **框架**: Next.js 14 (React)
- **UI库**: Tailwind CSS + shadcn/ui
- **状态管理**: Redux Toolkit
- **实时通信**: Agora RTC SDK
- **语音处理**: WebRTC + 自定义音频处理

### 后端
- **语言**: Go
- **框架**: Gin
- **数据库**: MySQL 8.0
- **缓存**: Redis 7
- **对象存储**: MinIO (S3兼容)
- **AI集成**: DeepSeek-V3 API

### 基础设施
- **容器化**: Docker + Docker Compose
- **开发环境**: 支持热重载的本地开发
- **生产部署**: 容器化部署方案

## 快速开始

### 使用 Docker (推荐)

1. **克隆项目**
```bash
git clone <repository-url>
cd ten-agent
```

2. **启动开发环境**
```bash
# 启动基础服务 (MySQL, Redis, MinIO)
make dev

# 或启动完整环境 (包含前后端)
make up
```

3. **访问应用**
- 前端: http://localhost:3000
- 后端API: http://localhost:8080
- MinIO控制台: http://localhost:9001

详细的Docker配置说明请参考 [DOCKER_SETUP.md](./DOCKER_SETUP.md)

### 本地开发

1. **启动基础服务**
```bash
make dev  # 启动 MySQL, Redis, MinIO
```

2. **启动后端**
```bash
cd backend
go mod download
go run main.go
```

3. **启动前端**
```bash
cd fronted
npm install
npm run dev
```

## 项目结构

```
├── backend/              # Go后端服务
│   ├── main.go
│   ├── Dockerfile
│   └── go.mod
├── fronted/              # Next.js前端应用
│   ├── src/
│   ├── Dockerfile
│   └── package.json
├── init-scripts/         # 数据库初始化脚本
├── docker-compose.yml    # 生产环境配置
├── docker-compose.dev.yml # 开发环境配置
├── Makefile             # 便捷命令
└── DOCKER_SETUP.md      # Docker详细说明
```

## 开发指南

### 环境配置

1. 复制环境变量模板：
```bash
cp .env.example .env
```

2. 根据需要修改配置文件

### 常用命令

```bash
# 查看所有可用命令
make help

# 开发环境
make dev          # 启动开发服务
make dev-logs     # 查看服务日志

# 数据库操作
make db-shell     # 连接MySQL
make redis-shell  # 连接Redis

# 维护
make clean        # 清理环境
make reset        # 完全重置
```

## 服务端口

| 服务 | 端口 | 描述 |
|------|------|------|
| 前端 | 3000 | Next.js 应用 |
| 后端 | 8080 | Go API 服务 |
| MySQL | 3306 | 数据库 |
| Redis | 6379 | 缓存服务 |
| MinIO API | 9000 | 对象存储 API |
| MinIO Console | 9001 | 管理控制台 |

## 贡献指南

1. Fork 项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request